function getLicenseControlInput(t){return t.find(".cuar-js-license-key")}function getLicenseControlValidateButton(t){return t.find(".cuar-js-validate-button")}function getLicenseControlResultContainer(t){return t.find(".cuar-js-result > span")}function getLicenseControlAddOn(t){return getLicenseControlInput(t).data("addon")}function validateLicense(t,e){var a=getLicenseControlInput(e),n=getLicenseControlValidateButton(e),r=getLicenseControlResultContainer(e),o=a.val().trim();if(0!=o.length){r.html(cuar.checkingLicense).removeClass().addClass("cuar-ajax-running"),a.prop("disabled",!0),n.prop("disabled",!0);var s={action:"cuar_validate_license",addon_id:getLicenseControlAddOn(e),license:o};t.post(cuar.ajaxUrl,s,function(t){a.prop("disabled",!1),n.prop("disabled",!1),r.removeClass().addClass(t.success?"cuar-ajax-success":"cuar-ajax-failure").html(t.message)},"json",function(){a.prop("disabled",!1),n.prop("disabled",!1),r.removeClass().addClass("cuar-ajax-failure").html(cuar.unreachableLicenseServerError)})}else r.html("")}!function(n){n.cuar||(n.cuar={}),n.cuar.addressManager=function(t,e){var o=this;o.fields=["name","company","line1","line2","zip","city","country","state","vat-number","logo-url"],o.isBusy=!1,o.$el=n(t),o.el=t,o.$el.data("cuar.addressManager",o),o.init=function(){o.options=n.extend({},n.cuar.addressManager.defaultOptions,e),o.$el.on("cuar:address:clear",o._onClearAddress),o.$el.on("cuar:address:set",o._onSetAddress),o.$el.on("cuar:address:get",o._onGetAddress),o.$el.on("cuar:address:getNonce",o._onGetNonce),o.$el.on("cuar:address:getAddressId",o._onGetAddressId),o.$el.on("cuar:address:isEmpty",o._onIsAddressEmpty),o.$el.on("cuar:address:setBusy",o._onSetBusy),o.$el.on("cuar:address:isBusy",o._onIsBusy),o.$el.on("cuar:address:loadFromOwner",o._onLoadAddressFromOwner),o.$el.on("cuar:address:saveForOwner",o._onSaveAddressForOwner),o.$el.on("click",".cuar-js-action.cuar-js-reset",o._onResetAddressAction)},o._onLoadAddressFromOwner=function(t,e){if(o._onIsBusy())return!1;if(null!=e){if(!o._onIsAddressEmpty()&&!confirm(cuar.addressConfirmLoadAddressFromOwner))return!1;var a={action:"cuar_load_address_from_owner",cuar_nonce:o._onGetNonce(),owner:e,address_id:o._onGetAddressId()};o._onSetBusy(null,!0),n.post(cuar.ajaxUrl,a,function(t){o._onSetBusy(null,!1),0!=t.success?null!=t.data.address?o._onSetAddress(null,t.data.address):alert(cuar.addressNoAddressFromOwner):alert(t.data)})}else alert(cuar.addressMustPickOwnerFirst)},o._onSaveAddressForOwner=function(t,e){if(o._onIsBusy())return!1;if(null!=e){if(!confirm(cuar.addressConfirmSaveAddressForOwner))return!1;var a={action:"cuar_save_address_for_owner",cuar_nonce:o._onGetNonce(),owner:e,address_id:o._onGetAddressId(),address:o._onGetAddress()};o._onSetBusy(null,!0),n.post(cuar.ajaxUrl,a,function(t){o._onSetBusy(null,!1),0!=t.success||alert(t.data)})}else alert(cuar.addressMustPickOwnerFirst)},o._onResetAddressAction=function(t){return t.preventDefault(),!o._onIsBusy()&&(!!confirm(cuar.addressConfirmResetAddress)&&void o._onClearAddress(null))},o._onClearAddress=function(t){o._onSetAddress(null,{name:"",company:"",line1:"",line2:"",zip:"",city:"",vat_number:"",logo_url:"",country:"",state:""})},o._onIsBusy=function(t){return o.isBusy},o._onSetBusy=function(t,e){(o.isBusy=e)?(o._getProgressIndicator().show(),o._getActions().addClass("button-disabled"),o._getInputFields().attr("disabled","disabled"),o._getInputContainers().addClass("disabled")):(o._getProgressIndicator().hide(),o._getActions().removeClass("button-disabled"),o._getInputFields().removeAttr("disabled"),o._getInputContainers().removeClass("disabled"))},o._onIsAddressEmpty=function(t){for(var e=0;e<o.fields.length;e++){var a=o.fields[e],n=o._getField(a).val();if(null!=n&&0<n.length)return!1}return!0},o._onGetAddress=function(t){for(var e={},a=0;a<o.fields.length;a++){var n=o.fields[a];e[n]=o._getField(n).val()}return e},o._onSetAddress=function(t,e){for(var a=0;a<o.fields.length;a++){var n=o.fields[a],r=o._getField(n);"country"==n?r.val(e[n]).trigger("change"):"state"==n?(r.val(e[n]),r.data("pending-value",e[n])):"vat_number"==n?r.val(e["vat-number"]):"logo_url"==n?r.val(e["logo-url"]):r.val(e[n])}},o._onGetNonce=function(){return n("input[name=cuar_nonce]",o.el).val()},o._onGetAddressId=function(){return o.$el.data("address-id")},o._getField=function(t){var e=".cuar-js-address-";return n(e+="vat_number"==t?"vat-number":"logo_url"==t?"logo-url":t,o.el).find(".cuar-js-address-field:input")},o._getActions=function(){return n(".cuar-js-action",o.el)},o._getProgressIndicator=function(){return n(".cuar-js-progress",o.el)},o._getInputFields=function(){return n(".cuar-js-address-field",o.el)},o._getInputContainers=function(){return n(".cuar-js-address-field-container",o.el)},o.init()},n.cuar.addressManager.defaultOptions={},n.fn.addressManager=function(t){return this.each(function(){new n.cuar.addressManager(this,t)})}}(jQuery),function(s){s.cuar||(s.cuar={}),s.cuar.bindCountryStateInputs=function(t,e){var o=this;o.$el=s(t),o.el=t,o.isBusy=!1,o.$el.data("cuar.bindCountryStateInputs",o),o.init=function(){if(null===s.cuar.bindCountryStateInputs.defaultOptions.select2.dropdownParent){var t=s("body");s.cuar.bindCountryStateInputs.defaultOptions.select2.dropdownParent=t.hasClass("wp-admin")?t:s("#cuar-js-content-container")}o.options=s.extend({},s.cuar.bindCountryStateInputs.defaultOptions,e),o._getCountryField().select2(o.options.select2),o._getStateField().select2(o.options.select2),o._getCountryField().on("change",o._onCountryChanged)},o._onCountryChanged=function(){var t=o._getCountryField(),e=o._getStateField(),a=o._getStateFieldContainer(),n=t.val();if(null!==n&&0!==n.length&&void 0!==n){var r={action:"cuar_get_country_states",country:n,address_id:o._getAddressId(),cuar_nonce:o._getNonce()};o._setAddressBusy(!0),s.post(cuar.ajaxUrl,r,function(t){o._setAddressBusy(!1),0!=t.success?(null!=t.data.states?(e.html(t.data.htmlOptions).select2(o.options.select2),e.val(e.data("pending-value")).trigger("change"),a.show()):(e.val("").trigger("change"),a.hide()),e.data("pending-value","")):alert(t.data)})}else a.hide()},o._isAddressBusy=function(){return o._getFieldContainer().triggerHandler("cuar:address:setBusy")},o._setAddressBusy=function(t){o._getFieldContainer().trigger("cuar:address:setBusy",[t])},o._getFieldContainer=function(){return o.$el.parents(o.options.fieldContainer)},o._getNonce=function(){return o._getFieldContainer().triggerHandler("cuar:address:getNonce")},o._getAddressId=function(){return o._getFieldContainer().triggerHandler("cuar:address:getAddressId")},o._getCountryField=function(){return s(o.options.countrySelector,o.el).find("select")},o._getStateFieldContainer=function(){return s(o.options.stateSelector,o.el)},o._getStateField=function(){return s(o.options.stateSelector,o.el).find("select")},o.init()},s.cuar.bindCountryStateInputs.defaultOptions={fieldContainer:".cuar-js-address",countrySelector:".cuar-js-address-country",stateSelector:".cuar-js-address-state",select2:{width:"100%",allowClear:!0,placeholder:"",dropdownParent:null}},s.fn.bindCountryStateInputs=function(t){return this.each(function(){new s.cuar.bindCountryStateInputs(this,t)})}}(jQuery),function(c){c.cuar||(c.cuar={}),c.cuar.classicUploader=function(t,n){var i=this;i.$el=c(t),i.el=t,i.$el.data("cuar.classicUploader",i),i.uploadsInProgress=0,i.init=function(){i.options=c.extend({},c.cuar.classicUploader.defaultOptions,n),i._getFileInput().css({opacity:0});var t=i._getPostId(),e={action:"cuar_attach_file",method:"classic-upload",post_id:t};e["cuar_classic-upload_"+t]=i._getNonce();var a=i._getDropZone();a.fileupload({url:cuar.ajaxUrl,dataType:"json",paramName:"cuar_file",formData:e,dropZone:a,add:i._onFileUploadAdd,done:i._onFileUploadDone,fail:i._onFileUploadFail,progress:i._onFileUploadProgress}),c(document).bind("dragover",i._onDragOverDropZone)},i._onDragOverDropZone=function(t){var e=i._getDropZone(),a=window.dropZoneTimeout;a?clearTimeout(a):e.addClass("in");var n=!1,r=t.target;do{if(r===e[0]){n=!0;break}r=r.parentNode}while(null!=r);n?e.addClass("hover"):e.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,e.removeClass("in hover")},100)},i._onFileUploadAdd=function(t,e){i._updateButtonState("disable");for(var a=0,n=e.files.length;a<n;a++){var r=e.files[a].name;if(e.files[a].attachmentItem=c(document).triggerHandler("cuar:attachmentManager:addItem",[i._getPostId(),r,r]),null==e.files[a].attachmentItem)return!1;c(document).trigger("cuar:attachmentManager:updateItemState",[e.files[a].attachmentItem,"pending"])}e.submit()},i._onFileUploadDone=function(t,e){for(var a=0,n=e.files.length;a<n;a++)if(e.result.success){var r=e.result.data.file,o=e.result.data.caption;c(document).trigger("cuar:attachmentManager:updateItem",[e.files[a].attachmentItem,i._getPostId(),r,o]),c(document).trigger("cuar:attachmentManager:updateItemState",[e.files[a].attachmentItem,"success"])}else{var s=null;0<e.result.data.length&&(s=e.result.data[0]),c(document).trigger("cuar:attachmentManager:showError",[e.files[a].attachmentItem,e.files[a].name,s,!0])}i._updateButtonState("enable")},i._updateButtonState=function(t){var e=i.$el.closest(".cuar-js-wizard-section").find(".cuar-submit-container > input[type=submit]");void 0===t||"disable"===t?(i.uploadsInProgress++,e.addClass("disabled")):"enable"===t&&(i.uploadsInProgress--,0===i.uploadsInProgress&&e.removeClass("disabled"))},i._onFileUploadFail=function(t,e){for(var a=0,n=e.files.length;a<n;a++)c(document).trigger("cuar:attachmentManager:showError",[e.files[a].attachmentItem,e.files[a].name,e.errorThrown,!0])},i._onFileUploadProgress=function(t,e){for(var a=0,n=e.files.length;a<n;a++){var r=parseInt(e.loaded/e.total*100,10);c(document).trigger("cuar:attachmentManager:updateItemProgress",[e.files[a].attachmentItem,r])}},i._getNonce=function(){return c("#cuar_classic-upload_"+i._getPostId(),i.el).val()},i._getPostId=function(){return i.$el.data("post-id")},i._getDropZone=function(){return c(i.options.dropzone,i.el).first()},i._getFileInput=function(){return c(i.options.fileInput,i.el).first()},i.init()},c.cuar.classicUploader.defaultOptions={dropzone:".cuar-js-dropzone",fileInput:".cuar-js-file-input"},c.fn.classicUploader=function(t){return this.each(function(){new c.cuar.classicUploader(this,t)})}}(jQuery),function(l){l.cuar||(l.cuar={}),l.cuar.fileAttachmentManager=function(t,e){var d=this;d.$el=l(t),d.el=t,d.$el.data("cuar.fileAttachmentManager",d),d.init=function(){d.options=l.extend({},l.cuar.fileAttachmentManager.defaultOptions,e),d._getSelectors().first().show(),d._getSelectorInput().change(d._onSelectorInputChanged),d._getAttachmentList().on("click",d.options.removeAction,d._onRemoveActionClick),d._getErrorList().on("click",d.options.dismissAction,d._onDismissError),l(document).on("cuar:attachmentManager:addItem",d._onAddAttachmentItem),l(document).on("cuar:attachmentManager:sendFile",d._onSendFile),l(document).on("cuar:attachmentManager:updateFile",d._onUpdateFile),l(document).on("cuar:attachmentManager:updateItem",d._onUpdateAttachmentItem),l(document).on("cuar:attachmentManager:updateItemProgress",d._onUpdateAttachmentItemProgress),l(document).on("cuar:attachmentManager:updateItemState",d._onUpdateAttachmentItemState),l(document).on("cuar:attachmentManager:showError",d._onShowError)},d._onShowError=function(t,e,a,n,r){d._showError(e,a,n,r)},d._onUpdateAttachmentItem=function(t,e,a,n,r){0!=e.length?d._updateAttachmentItem(e,a,n,r):console.log("_onUpdateAttachmentItem :: Item for not found")},d._onUpdateAttachmentItemProgress=function(t,e,a){0!=e.length?d._updateAttachmentItemProgress(e,a):console.log("_onUpdateAttachmentItemProgress :: Item not found")},d._onUpdateAttachmentItemState=function(t,e,a){0!=e.length?d._updateAttachmentItemState(e,a):console.log("_onUpdateAttachmentItemState :: Item not found")},d._onSelectorInputChanged=function(){var t=d._getSelectors(),e=l(this).val(),a=t.filter(function(){return l(this).data("method")==e});if(!a.is(":visible")){var n=t.filter(":visible");n.length<=0?a.fadeIn():n.fadeOut("fast",function(){a.fadeIn()})}},d._onRemoveActionClick=function(t){if(t.preventDefault(),confirm(cuar.confirmDeleteAttachedFile)){var a=l(this).closest(d.options.attachmentItem),e=a.data("post-id"),n=a.data("filename"),r=d._getAttachmentListRemoveNonce();d._updateAttachmentItemState(a,"pending");var o={action:"cuar_remove_attached_file",post_id:e,filename:n,cuar_remove_attachment_nonce:r};l.post(cuar.ajaxUrl,o,function(t){if(0==t.success){var e="";0<t.data.length&&(e=t.data[0]),d._showError(a,n,e,!1)}else d._removeItem(a)})}},d._onSendFile=function(t,r,e,o,a,s,n,i){var c=n;void 0!==n&&0!=n.trim().length||(c=s),d._updateAttachmentItem(r,o,s,c),d._updateAttachmentItemState(r,"pending");var u={action:"cuar_attach_file",method:e,post_id:o,filename:s,caption:c,extra:i};u["cuar_"+e+"_"+o]=a,l.post(cuar.ajaxUrl,u,function(t){if(0==t.success){var e="";0<t.data.length&&(e=t.data[0]),d._showError(r,s,e,!0)}else{var a=t.data.file,n=t.data.caption;d._updateAttachmentItem(r,o,a,n),d._updateAttachmentItemState(r,"success"),l(document).trigger("cuar:attachmentManager:fileAttached",[r,o,s,a,n])}})},d._onUpdateFile=function(t,r,o,e,s,a){var n=a;void 0!==a&&0!=a.trim().length||(n=s),d._updateAttachmentItemState(r,"pending");var i={action:"cuar_update_attached_file",post_id:o,filename:s,caption:n,cuar_update_attachment_nonce:e};l.post(cuar.ajaxUrl,i,function(t){if(0==t.success){var e="";0<t.data.length&&(e=t.data[0]),d._showError(r,s,e,!0)}else{var a=t.data.file,n=t.data.caption;d._updateAttachmentItem(r,o,a,n),d._updateAttachmentItemState(r,"success")}})},d._onAddAttachmentItem=function(t,e,a,n,r){if(0<cuar.maxAttachmentCount&&d._getAttachmentItems().length>=cuar.maxAttachmentCount)return d._showError(null,a,cuar.tooManyAttachmentsAlready,!0),null;var o=d._getAttachmentTemplate().clone();return o.appendTo(d.options.attachmentList),d._updateAttachmentItem(o,e,a,n),d._getAttachmentListEmptyMessage().hide(),o},d._removeItem=function(t){t.fadeOut(400,function(){d._getAttachmentItems().length<=1&&d._getAttachmentListEmptyMessage().show(),t.remove()})},d._updateAttachmentItem=function(t,e,a,n){void 0!==n&&0!==n.trim().length||(n=a),t.data("post-id",e),t.data("filename",a),t.children(".cuar-js-caption").html(n)},d._updateAttachmentItemState=function(t,e){t.removeClass(function(t,e){return(e.match(/(^|\s)cuar-js-state-\S+/g)||[]).join(" ")}),t.addClass("cuar-js-state-"+e);var a=t.children(".cuar-js-actions"),n=t.children(".cuar-js-progress");switch(e){case"pending":a.hide(),n.show(),d._updateAttachmentItemProgress(t,0);break;case"error":case"success":a.show(),n.hide()}l(document).trigger("cuar:attachmentManager:itemStateUpdated",[t,e])},d._updateAttachmentItemProgress=function(t,e){var a=t.children(".cuar-js-progress"),n=a.find(".cuar-js-progress-bar"),r=a.find(".cuar-js-progress-label");a.show(),e<=0?(n.addClass("cuar-js-indeterminate").addClass("progress-bar-striped").addClass("active").css({width:"100%"}).attr("aria-valuenow","100"),r.hide().html("")):(n.removeClass("cuar-js-indeterminate").removeClass("progress-bar-striped").removeClass("active").css({width:e+"%"}).attr("aria-valuenow",e),r.show().html(e+"%"))},d._showError=function(t,e,a,n){if(null!==t&&(console.log(t),console.log(n),n?d._removeItem(t):d._updateAttachmentItemState(t,"error")),null!=a&&0<a.length){null!=e&&0<e.length&&(a="<strong>"+e+"</strong> - "+a);var r=d._getErrorTemplate().clone();r.find(".cuar-js-message").html(a),r.appendTo(d.options.errorList,d.el),r.show()}},d._onDismissError=function(t){l(this).closest(".cuar-js-error").remove(),t.preventDefault()},d._getErrorList=function(){return l(d.options.errorList,d.el)},d._getAttachmentList=function(){return l(d.options.attachmentList)},d._getAttachmentListEmptyMessage=function(){return d._getAttachmentList().find(".cuar-js-empty-message")},d._getAttachmentItems=function(){return d._getAttachmentList().find(d.options.attachmentItem)},d._getAttachmentItemByFilename=function(t){return d._getAttachmentItems().filter(function(){return l(this).data("filename")==t})},d._getAttachmentListRemoveNonce=function(){return l("#cuar_remove_attachment_nonce",d._getAttachmentList()).val()},d._getErrorTemplate=function(){return l(d.options.errorTemplate,d.el).children(".cuar-js-error").first()},d._getAttachmentTemplate=function(){return l(d.options.attachmentItemTemplate).find(d.options.attachmentItem).first()},d._getSelectorInput=function(){return l(d.options.selectorInput,d.el)},d._getSelectors=function(){return l(d.options.selectorList+">"+d.options.selectorItem,d.el)},d.init()},l.cuar.fileAttachmentManager.defaultOptions={errorList:".cuar-js-file-attachment-errors",attachmentList:".cuar-js-file-attachments",attachmentItem:".cuar-js-file-attachment",attachmentItemTemplate:".cuar-js-file-attachment-template",errorTemplate:".cuar-js-error-template",selectorList:".cuar-js-file-selectors",selectorItem:".cuar-js-file-selector",selectorInput:".cuar-js-file-selector-input",removeAction:".cuar-js-remove-action",dismissAction:".cuar-js-dismiss"},l.fn.fileAttachmentManager=function(t){return this.each(function(){new l.cuar.fileAttachmentManager(this,t)})}}(jQuery),function(u){u.cuar||(u.cuar={}),u.cuar.ftpUploader=function(t,e){var c=this;c.$el=u(t),c.el=t,c.$el.data("cuar.ftpUploader",c),c.init=function(){c.options=u.extend({},u.cuar.ftpUploader.defaultOptions,e),c._getAddButton().click(c._onAddButtonClicked),u(document).on("cuar:attachmentManager:fileAttached",c._removeFileFromSelect)},c._removeFileFromSelect=function(t,e,a,n,r,o){"ftp-move"==c._getFtpOperation()&&c._getSelectBox().children().filter(function(){return u(this).val()==n}).remove()},c._onAddButtonClicked=function(t){t.preventDefault();var e=c._getSelectedFiles(),a=c._getPostId(),n=c._getFtpOperation();if(null!=e&&0!=e.length)for(var r=0,o=e.length;r<o;r++){var s=e[r],i=u(document).triggerHandler("cuar:attachmentManager:addItem",[a,s,s]);null!=i&&u(document).trigger("cuar:attachmentManager:sendFile",[i,"ftp-folder",a,c._getNonce(),s,"",n])}},c._getFtpOperation=function(){return c._getCopyCheckbox().is(":checked")?"ftp-copy":"ftp-move"},c._getNonce=function(){return u("#cuar_ftp-folder_"+c._getPostId(),c.el).val()},c._getPostId=function(){return c.$el.data("post-id")},c._getSelectedFiles=function(){return c._getSelectBox().val()},c._getAddButton=function(){return u(c.options.addButton,c.el)},c._getSelectBox=function(){return u(c.options.selectBox,c.el).first()},c._getCopyCheckbox=function(){return u(c.options.copyCheckbox,c.el).first()},c.init()},u.cuar.ftpUploader.defaultOptions={addButton:".cuar-js-ftp-add-files",selectBox:".cuar-js-ftp-file-selection",copyCheckbox:".cuar-js-copy-file-checkbox"},u.fn.ftpUploader=function(t){return this.each(function(){new u.cuar.ftpUploader(this,t)})}}(jQuery),function(n){n.cuar||(n.cuar={}),n.cuar.gatewayPicker=function(t,e){var a=this;a.$el=n(t),a.el=t,a.$el.data("cuar.gatewayPicker",a),a.init=function(){a.options=n.extend({},n.cuar.gatewayPicker.defaultOptions,e),a._getSelectors().on("change",a._onGatewaySelected)},a._onGatewaySelected=function(t){t.preventDefault();var e=n(this).data("gateway");a._getGatewayForms().hide(0),a._getGatewayForm(e).show(0)},a._getGatewayForms=function(t){return n(a.options.gatewayForm,a.el)},a._getGatewayForm=function(t){return n(a.options.gatewayForm+"[data-gateway="+t+"]",a.el)},a._getSelectors=function(){return n(a.options.gatewaySelector,a.el)},a.init()},n.cuar.gatewayPicker.defaultOptions={gatewaySelector:".cuar-js-gateway-selector",gatewayForm:".cuar-js-gateway-form"},n.fn.gatewayPicker=function(t){return this.each(function(){new n.cuar.gatewayPicker(this,t)})}}(jQuery),function(n){n.cuar||(n.cuar={}),n.cuar.ajaxFolderAction=function(t,e){var a=this;a.$el=n(t),a.el=t,a.$el.data("cuar.ajaxFolderAction",a),a.init=function(){a.options=n.extend({},n.cuar.ajaxFolderAction.defaultOptions,e),a._getButton().click(a._onButtonClicked)},a._onButtonClicked=function(t){t.preventDefault();var e={action:"cuar_folder_action",folder_action:a._getAction(),path:a._getPath(),extra:a._getExtra()};a.$el.css("opacity","0.5"),a._getButton().bind("click",function(t){t.preventDefault()}),n.post(cuar.ajaxUrl,e,function(t){if(a.$el.css("opacity","1"),0==t.success)null!=t.data&&0<t.data.length&&alert(t.data),a._getButton().click(a._onButtonClicked);else{var e=a._getSuccessMessage();null!=e&&0<e.length?a.$el.removeClass("cuar-error").addClass("cuar-info").html(e):a.$el.remove()}})},a._getButton=function(){return n(".button",a.el)},a._getPath=function(){return a.$el.data("path")},a._getAction=function(){return a.$el.data("action")},a._getExtra=function(){return a.$el.data("extra")},a._getSuccessMessage=function(){return a.$el.data("success-message")},a.init()},n.fn.ajaxFolderAction=function(t){return this.each(function(){new n.cuar.ajaxFolderAction(this,t)})}}(jQuery),jQuery(document).ready(function(a){a(".cuar-js-license-field").each(function(){var e=a(this);e.on("click",".cuar-js-validate-button",function(t){return t.preventDefault(),validateLicense(a,e),!1})})}),function(n){n.cuar||(n.cuar={}),n.cuar.mediaInputControl=function(t,e){var a=this;a.$el=n(t),a.el=t,a.isBusy=!1,a.fileFrame=null,a.$el.data("cuar.mediaInputControl",a),a.init=function(){a.options=n.extend({},n.cuar.mediaInputControl.defaultOptions,e),a.$el.on("click",".cuar-upload-button",a._onUploadButtonClicked)},a._onUploadButtonClicked=function(t){t.preventDefault();var e=n(this);a.fileFrame||(a.fileFrame=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:e.data("uploader_title"),button:{text:e.data("uploader_button_text")},multiple:!1}),a.fileFrame.on("menu:render:default",function(t){t.unset("library-separator"),t.unset("gallery"),t.unset("featured-image"),t.unset("embed"),t.set({})}),a.fileFrame.on("insert",function(){a.fileFrame.state().get("selection").each(function(t,e){t=t.toJSON(),a._getUrlInputField().val(t.url)})})),a.fileFrame.open()},a._getUrlInputField=function(){return n(a.options.urlInputSelector,a.el)},a.init()},n.cuar.mediaInputControl.defaultOptions={urlInputSelector:".cuar-upload-input"},n.fn.mediaInputControl=function(t){return this.each(function(){new n.cuar.mediaInputControl(this,t)})}}(jQuery),function(r){r.cuar||(r.cuar={}),r.cuar.paymentDataManager=function(t,a){var n=this;n.$el=r(t),n.el=t,n.$el.data("cuar.paymentDataManager",n),n.init=function(){n.options=r.extend({},r.cuar.paymentDataManager.defaultOptions,a);var t=r(".cuar-datepicker-control input[type=hidden]",n.el),e=r(".cuar-datepicker-control .cuar-datepicker-input",n.el);e.datepicker({dateFormat:n.options.datePickerOptions.dateFormat,altFormat:n.options.rawDateFormat,altField:t}),e.datepicker("setDate",n._formatDate(t.val())),e.val(n._formatDate(t.val()))},n._formatDate=function(t){var e=r.datepicker.parseDate(n.options.rawDateFormat,t,n.options.datePickerOptions);return r.datepicker.formatDate(n.options.datePickerOptions.dateFormat,e,n.options.datePickerOptions)},n.init()},r.cuar.paymentDataManager.defaultOptions={rawDateFormat:"yy-mm-dd",datePickerOptions:{dateFormat:cuar.datepickerDateFormat,closeText:cuar.datepickerCloseText,currentText:cuar.datepickerCurrentText,monthNames:cuar.datepickerMonthNames,monthNamesShort:cuar.datepickerMonthNamesShort,monthStatus:cuar.datepickerMonthStatus,dayNames:cuar.datepickerDayNames,dayNamesShort:cuar.datepickerDayNamesShort,dayNamesMin:cuar.datepickerDayNamesMin,firstDay:cuar.datepickerFirstDay,isRTL:cuar.datepickerIsRTL}},r.fn.paymentDataManager=function(t){return this.each(function(){new r.cuar.paymentDataManager(this,t)})}}(jQuery),function(r){r.cuar||(r.cuar={}),r.cuar.paymentNotesManager=function(t,e){var n=this;n.$el=r(t),n.el=t,n.$el.data("cuar.paymentNotesManager",n),n.init=function(){n.options=r.extend({},r.cuar.paymentNotesManager.defaultOptions,e),n.$el.on("click",".cuar-js-remove-action",n._onRemoveActionClick),n.$el.on("click",".cuar-js-add-note",n._onAddNoteButtonClick),n._getAddNoteMessageInput().keyup(n._onAddNoteMessageChanged)},n._onAddNoteMessageChanged=function(t){n._updateAddNoteButtonState()},n._updateAddNoteButtonState=function(t){n._canAddNote()?n._getAddNoteButton().removeAttr("disabled"):n._getAddNoteButton().attr("disabled","disabled")},n._canAddNote=function(){return 0<n._getAddNoteMessage().length},n._onAddNoteButtonClick=function(t){t.preventDefault();var e={action:"cuar_add_payment_note",payment_id:n._getNoteList().data("payment-id"),message:n._getAddNoteMessage(),cuar_add_payment_note_nonce:n._getNoteListAddNonce()};n._getAddNoteButton().attr("disabled","disabled"),r.post(cuar.ajaxUrl,e,function(t){if(0==t.success)t.data&&alert(t.data),n._updateAddNoteButtonState();else{n._getAddNoteMessageInput().val(""),n._updateAddNoteButtonState();var e=n._getNoteTemplate().clone();n._updateNoteItem(e,t.data.id,t.data.timestamp,t.data.author,t.data.message),e.insertAfter(n._getNoteList().children(".cuar-js-add-note-form")),n._getEmptyMessage().hide()}})},n._onRemoveActionClick=function(t){if(t.preventDefault(),confirm(cuar.confirmDeletePaymentNote)){var e=r(this).closest(n.options.noteItem),a={action:"cuar_delete_payment_note",payment_id:n._getNoteList().data("payment-id"),note_id:e.data("note-id"),cuar_delete_payment_note_nonce:n._getNoteListRemoveNonce()};r.post(cuar.ajaxUrl,a,function(t){0==t.success?t.data&&alert(t.data):e.slideUp(400,function(){e.remove(),n._getNoteCount()<=0?n._getEmptyMessage().show():n._getEmptyMessage().hide()})})}},n._updateNoteItem=function(t,e,a,n,r){t.data("note-id",e),t.children(".cuar-js-timestamp").html(a),t.children(".cuar-js-author").html(n),t.children(".cuar-js-message").html(r)},n._getNoteCount=function(){return n._getNoteList().children(n.options.noteItem).not(n.options.addNoteForm).not(n.options.emptyMessage).not(n.options.noteItemTemplate).length},n._getEmptyMessage=function(){return r(n.options.emptyMessage,n.el)},n._getNoteList=function(){return r(n.options.noteList,n.el)},n._getAddNoteMessage=function(){return r(".cuar-js-new-note-message",n.el).val()},n._getAddNoteMessageInput=function(){return r(".cuar-js-new-note-message",n.el)},n._getAddNoteButton=function(){return r(".cuar-js-add-note",n.el)},n._getNoteListEmptyMessage=function(){return r(".cuar-js-empty-message",n.el)},n._getNoteListAddNonce=function(){return r("#cuar_add_note_nonce",n.el).val()},n._getNoteListRemoveNonce=function(){return r("#cuar_remove_note_nonce",n.el).val()},n._getNoteTemplate=function(){return r(n.options.noteItemTemplate,n.el).children(n.options.noteItem).first()},n._getNoteForm=function(){return r(n.options.addNoteForm,n.el).children(n.options.noteItem).first()},n.init()},r.cuar.paymentNotesManager.defaultOptions={noteList:".cuar-js-payment-notes",noteItem:".cuar-js-payment-note",noteItemTemplate:".cuar-js-payment-note-template",addNoteForm:".cuar-js-add-note-form",emptyMessage:".cuar-js-empty-message"},r.fn.paymentNotesManager=function(t){return this.each(function(){new r.cuar.paymentNotesManager(this,t)})}}(jQuery);
//# sourceMappingURL=customer-area.js.map